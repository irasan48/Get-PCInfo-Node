<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get-PCInfo Professional ver. 2025.6.3</title>
    <link rel="stylesheet" href="assets/styles.css">
    <link rel="stylesheet" href="assets/result-styles.css">
</head>
<body>
    <!-- Title Bar -->
    <div class="title-bar">
        <div class="title-bar-title">
            <span class="title-icon">💻</span>
            Get-PCInfo Professional ver. 2025.6.3
        </div>
        <div class="title-bar-controls">
            <button class="title-bar-button" onclick="minimizeWindow()">
                <svg width="14" height="14" viewBox="0 0 14 14"><path d="M2 7h10" stroke="currentColor" stroke-width="1.5"/></svg>
            </button>
            <button class="title-bar-button" onclick="maximizeWindow()">
                <svg width="14" height="14" viewBox="0 0 14 14"><rect x="2" y="2" width="10" height="10" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
            </button>
            <button class="title-bar-button close" onclick="closeWindow()">
                <svg width="14" height="14" viewBox="0 0 14 14"><path d="M2 2l10 10M12 2L2 12" stroke="currentColor" stroke-width="1.5"/></svg>
            </button>
        </div>
    </div>

    <!-- Enhanced Welcome Screen -->
    <div class="welcome-screen" id="welcomeScreen">
        <!-- Animated background elements -->
        <div class="bg-animation">
            <div class="gradient-bg"></div>
            <div class="grid-bg"></div>
            <canvas id="particleCanvas"></canvas>
            <div class="floating-shapes">
                <div class="shape shape-1"></div>
                <div class="shape shape-2"></div>
                <div class="shape shape-3"></div>
                <div class="shape shape-4"></div>
                <div class="shape shape-5"></div>
            </div>
        </div>

        <!-- Main welcome content -->
        <div class="welcome-container">
            <!-- 3D Atom Model -->
            <div class="logo-3d-container">
                <div class="logo-3d">
                    <div class="atom-nucleus"></div>
                    <div class="electron-orbit">
                        <div class="electron"></div>
                    </div>
                    <div class="electron-orbit">
                        <div class="electron"></div>
                    </div>
                    <div class="electron-orbit">
                        <div class="electron"></div>
                    </div>
                </div>
            </div>

            <h1 class="welcome-title glitch" data-text="Get-PCInfo">Get-PCInfo</h1>
            <p class="welcome-subtitle">IT Administrator alat za Windows sisteme</p>
            
            <div class="welcome-description glass-card">
                <div class="description-icon">🚀</div>
                <p>
                    Aplikacija kombinira mogućnost PowerShell-a s intuitivnim grafičkim sučeljem, omogućujući sistemskim administratorima potpunu kontrolu nad lokalnim korisničkim računima, hardverskim resursima, sigurnosnim komponentama i sustavskim događajima.
                </p>
            </div>

            <!-- System stats preview -->
            <div class="system-preview">
                <div class="stat-card">
                    <div class="stat-icon">💾</div>
                    <div class="stat-value" id="ramPreview">--</div>
                    <div class="stat-label">RAM</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">⚡</div>
                    <div class="stat-value" id="cpuPreview">--</div>
                    <div class="stat-label">CPU</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">💿</div>
                    <div class="stat-value" id="diskPreview">--</div>
                    <div class="stat-label">DISK</div>
                </div>
            </div>
            
            <button class="start-button-3d" onclick="startApplication()">
                <span class="button-bg"></span>
                <span class="button-text">Pokreni Get-PCInfo</span>
                <span class="button-icon">→</span>
            </button>
            
            <div class="loading-bar" id="loadingBar">
                <div class="loading-progress"></div>
            </div>

            <p class="welcome-footer">© 2025 Get-PCInfo by Ivica Rašan. Verzija 2025.6.3</p>
        </div>

        <!-- Decorative elements -->
        <div class="corner-decoration top-left"></div>
        <div class="corner-decoration top-right"></div>
        <div class="corner-decoration bottom-left"></div>
        <div class="corner-decoration bottom-right"></div>
    </div>

    <!-- Enhanced Main Container -->
    <div class="container" id="mainContainer" style="display: none;">
        <!-- Animated background for main app -->
        <div class="app-bg">
            <div class="app-gradient"></div>
            <div class="app-grid"></div>
        </div>

        <!-- Modern App Header -->
        <div class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="app-logo">
                        <div class="logo-cube">
                            <span>GPC</span>
                        </div>
                    </div>
                    <div class="header-info">
                        <h1>Get-PCInfo Professional</h1>
                        <p class="header-subtitle">IT Administrator alat za analizu sistema</p>
                    </div>
                </div>
                <div class="header-right">
                    <div class="system-status">
                        <div class="status-indicator online"></div>
                        <span>Sistem aktivan</span>
                    </div>
                    <div class="header-time" id="headerTime"></div>
                </div>
            </div>
        </div>

        <!-- Main Content with enhanced sidebar -->
        <div class="main-content">
            <!-- Modern Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h3>Glavne funkcije</h3>
                </div>
                <div class="tabs-container">
                    <div class="tab active" onclick="switchTab('home', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">🏠</span>
                        <span class="tab-text">Početna</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('lokalni-korisnici', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">👤</span>
                        <span class="tab-text">Lokalni korisnički računi</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('grupe', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">👥</span>
                        <span class="tab-text">Grupe sa korisnicima</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('logiranja', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">📋</span>
                        <span class="tab-text">Izlist logiranja i odjave</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('neaktivni', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">💤</span>
                        <span class="tab-text">Neaktivni korisnički računi</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('permissions', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">🔒</span>
                        <span class="tab-text">Folder Permissions</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('usb', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">🔌</span>
                        <span class="tab-text">Korištenje USB uređaja</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('datum-kreiranja', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">📅</span>
                        <span class="tab-text">Datum kreiranja KR</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('obrisani', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">🗑️</span>
                        <span class="tab-text">Obrisani Local Users</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('print', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">🖨️</span>
                        <span class="tab-text">Printer Report</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('admin', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">👨‍💼</span>
                        <span class="tab-text">Admin Group</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('serijski', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">🔢</span>
                        <span class="tab-text">Serial Number Report</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('upravljanje', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">⚙️</span>
                        <span class="tab-text">Upravljanje korisnicima</span>
                        <span class="tab-arrow">›</span>
                    </div>
                    <div class="tab" onclick="switchTab('info', event)">
                        <div class="tab-bg"></div>
                        <span class="tab-icon">ℹ️</span>
                        <span class="tab-text">Info</span>
                        <span class="tab-arrow">›</span>
                    </div>
                </div>
            </div>

            <!-- Enhanced Content Area -->
            <div class="content">
                <div class="content-header" id="contentHeader">
                    <h2>Dobrodošli</h2>
                    <div class="header-line"></div>
                </div>
                <div class="content-body" id="contentBody">
                    <div class="welcome-content fade-in">
                        <div class="hero-section">
                            <h2 class="hero-title">Dobrodošli u Get-PCInfo</h2>
                            <p class="hero-subtitle">Odaberite funkciju iz lijeve navigacije za početak analize.</p>
                        </div>
                        
                        <div class="feature-cards">
                            <div class="feature-card-3d">
                                <div class="card-inner">
                                    <div class="card-front">
                                        <div class="feature-icon">👤</div>
                                        <h3>Korisnički računi</h3>
                                    </div>
                                    <div class="card-back">
                                        <p>Upravljanje i analiza lokalnih korisničkih računa</p>
                                    </div>
                                </div>
                            </div>
                            <div class="feature-card-3d">
                                <div class="card-inner">
                                    <div class="card-front">
                                        <div class="feature-icon">🔒</div>
                                        <h3>Sigurnost</h3>
                                    </div>
                                    <div class="card-back">
                                        <p>Pregled dozvola i sigurnosnih postavki</p>
                                    </div>
                                </div>
                            </div>
                            <div class="feature-card-3d">
                                <div class="card-inner">
                                    <div class="card-front">
                                        <div class="feature-icon">💻</div>
                                        <h3>Sistem info</h3>
                                    </div>
                                    <div class="card-back">
                                        <p>Detaljne informacije o hardveru i softveru</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Live system stats -->
                        <div class="live-stats">
                            <h3>Sistemske statistike uživo</h3>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-header">
                                        <span>CPU korištenje</span>
                                        <span class="stat-live" id="cpuUsage">0%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div class="stat-fill cpu-fill" id="cpuFill"></div>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-header">
                                        <span>RAM korištenje</span>
                                        <span class="stat-live" id="ramUsage">0%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div class="stat-fill ram-fill" id="ramFill"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Code -->
    <script>
    // Title bar functions
    function minimizeWindow() {
        if (window.electronAPI && window.electronAPI.minimizeWindow) {
            window.electronAPI.minimizeWindow();
        }
    }

    function maximizeWindow() {
        if (window.electronAPI && window.electronAPI.maximizeWindow) {
            window.electronAPI.maximizeWindow();
        }
    }

    function closeWindow() {
        if (window.electronAPI && window.electronAPI.closeWindow) {
            window.electronAPI.closeWindow();
        } else {
            window.close();
        }
    }

    // Start application function
    async function startApplication() {
        console.log('Starting application...');
        
        try {
            // Pokaži loading bar
            const loadingBar = document.getElementById('loadingBar');
            if (loadingBar) {
                loadingBar.style.display = 'block';
            }
            
            // Animiraj loading progress
            const loadingProgress = document.querySelector('.loading-progress');
            if (loadingProgress) {
                loadingProgress.style.width = '50%';
            }
            
            // Pozovi Electron API za sistem info
            if (window.electronAPI && window.electronAPI.getSystemInfo) {
                const systemData = await window.electronAPI.getSystemInfo();
                console.log('System data received:', systemData);
                
                // Ažuriraj preview podatke
                updateSystemPreview(systemData);
                
                // Završi loading
                if (loadingProgress) {
                    loadingProgress.style.width = '100%';
                }
                
                // Nakon 500ms, prebaci na glavni ekran
                setTimeout(() => {
                    document.getElementById('welcomeScreen').style.display = 'none';
                    document.getElementById('mainContainer').style.display = 'block';
                    
                    // Pokreni sat
                    updateTime();
                    setInterval(updateTime, 1000);
                    
                    // Pokreni live stats
                    updateLiveStats(systemData);
                    setInterval(() => updateLiveStats(systemData), 2000);
                }, 500);
                
            } else {
                throw new Error('Electron API nije dostupan');
            }
            
        } catch (error) {
            console.error('Error starting application:', error);
            alert('Greška pri pokretanju aplikacije: ' + error.message);
            
            // Sakrij loading
            const loadingBar = document.getElementById('loadingBar');
            if (loadingBar) {
                loadingBar.style.display = 'none';
            }
        }
    }

    // Update system preview on welcome screen
    function updateSystemPreview(data) {
        try {
            // RAM
            const ramPreview = document.getElementById('ramPreview');
            if (ramPreview && data.memory) {
                const ramGB = Math.round(data.memory.total / (1024 * 1024 * 1024));
                ramPreview.textContent = ramGB + ' GB';
            }
            
            // CPU
            const cpuPreview = document.getElementById('cpuPreview');
            if (cpuPreview && data.cpu) {
                // Skrati naziv CPU-a
                let cpuName = data.cpu.brand || 'Unknown';
                
                // Ukloni redundantne dijelove
                cpuName = cpuName.replace('Intel(R) Core(TM) ', 'Intel ');
                cpuName = cpuName.replace('AMD Ryzen ', 'Ryzen ');
                cpuName = cpuName.replace(' CPU', '');
                
                // Ako je još uvijek predugačak, skrati
                if (cpuName.length > 25) {
                    // Pronađi @ i zadrži samo dio prije
                    const atIndex = cpuName.indexOf('@');
                    if (atIndex > 0) {
                        cpuName = cpuName.substring(0, atIndex).trim();
                    } else {
                        cpuName = cpuName.substring(0, 25) + '...';
                    }
                }
                
                cpuPreview.textContent = cpuName;
            }
            
            // Disk
            const diskPreview = document.getElementById('diskPreview');
            if (diskPreview && data.disk) {
                const diskGB = Math.round(data.disk.total / (1024 * 1024 * 1024));
                console.log('Disk total bytes:', data.disk.total);
                console.log('Disk total GB:', diskGB);
                
                if (diskGB > 0) {
                    diskPreview.textContent = diskGB + ' GB';
                } else {
                    // Ako još uvijek nema podataka, pokušaj alternativni način
                    let totalSize = 0;
                    if (data.disk.filesystems && data.disk.filesystems.length > 0) {
                        data.disk.filesystems.forEach(fs => {
                            if (fs.size) totalSize += fs.size;
                        });
                    }
                    const altGB = Math.round(totalSize / (1024 * 1024 * 1024));
                    diskPreview.textContent = altGB > 0 ? altGB + ' GB' : 'N/A';
                }
            }
        } catch (error) {
            console.error('Error updating preview:', error);
        }
    }

    // Update time
    function updateTime() {
        const now = new Date();
        const timeStr = now.toLocaleTimeString('hr-HR');
        const dateStr = now.toLocaleDateString('hr-HR');
        const headerTime = document.getElementById('headerTime');
        if (headerTime) {
            headerTime.innerHTML = `<div>${timeStr}</div><div style="font-size: 0.8em; opacity: 0.7;">${dateStr}</div>`;
        }
    }

    // Update live stats
    function updateLiveStats(systemData) {
        // CPU usage (simulirano za sada)
        const cpuUsage = Math.floor(Math.random() * 100);
        document.getElementById('cpuUsage').textContent = cpuUsage + '%';
        document.getElementById('cpuFill').style.width = cpuUsage + '%';
        
        // RAM usage
        if (systemData && systemData.memory) {
            const ramUsage = Math.round((systemData.memory.used / systemData.memory.total) * 100);
            document.getElementById('ramUsage').textContent = ramUsage + '%';
            document.getElementById('ramFill').style.width = ramUsage + '%';
        }
    }

    // Tab switching
    function switchTab(tabName, event) {
        console.log('Switching to tab:', tabName);
        
        // Remove active class from all tabs
        document.querySelectorAll('.tab').forEach(tab => {
            tab.classList.remove('active');
        });
        
        // Add active class to clicked tab
        if (event && event.currentTarget) {
            event.currentTarget.classList.add('active');
        }
        
        // Update content header
        const contentHeader = document.getElementById('contentHeader');
        const tabText = event.currentTarget.querySelector('.tab-text').textContent;
        contentHeader.innerHTML = `<h2>${tabText}</h2><div class="header-line"></div>`;
        
        // Update content body based on tab
        const contentBody = document.getElementById('contentBody');
        
        switch(tabName) {
            case 'home':
                // Show welcome content
                location.reload();
                break;
            case 'lokalni-korisnici':
                contentBody.innerHTML = `
                    <div class="tab-content">
                        <h3>Lokalni korisnički računi</h3>
                        <p>Učitavanje liste lokalnih korisnika...</p>
                    </div>
                `;
                loadLocalUsers();
                break;
            case 'info':
                showSystemInfo();
                break;
            default:
                contentBody.innerHTML = `
                    <div class="tab-content">
                        <h3>${tabText}</h3>
                        <p>Ova funkcija je trenutno u razvoju.</p>
                    </div>
                `;
        }
    }

    // Load local users
    async function loadLocalUsers() {
        // Simulacija učitavanja korisnika
        setTimeout(() => {
            const contentBody = document.getElementById('contentBody');
            contentBody.innerHTML = `
                <div class="tab-content">
                    <h3>Lokalni korisnički računi</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Korisničko ime</th>
                                <th>Puno ime</th>
                                <th>Status</th>
                                <th>Zadnja prijava</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Administrator</td>
                                <td>Administrator</td>
                                <td><span class="badge active">Aktivan</span></td>
                                <td>2025-01-10 14:30</td>
                            </tr>
                            <tr>
                                <td>Guest</td>
                                <td>Guest Account</td>
                                <td><span class="badge inactive">Neaktivan</span></td>
                                <td>-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
        }, 1000);
    }

    // Show system info
    async function showSystemInfo() {
        try {
            const data = await window.electronAPI.getSystemInfo();
            const contentBody = document.getElementById('contentBody');
            
            contentBody.innerHTML = `
                <div class="tab-content system-info">
                    <h3>Informacije o sistemu</h3>
                    
                    <div class="info-section">
                        <h4>💻 Računar</h4>
                        <div class="info-row">
                            <span class="info-label">Ime računara:</span>
                            <span class="info-value">${data.computerName}</span>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h4>⚡ Procesor</h4>
                        <div class="info-row">
                            <span class="info-label">Model:</span>
                            <span class="info-value">${data.cpu.manufacturer} ${data.cpu.brand}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Brzina:</span>
                            <span class="info-value">${data.cpu.speed} GHz</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Jezgra:</span>
                            <span class="info-value">${data.cpu.cores} (${data.cpu.physicalCores} fizičkih)</span>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h4>💾 Memorija</h4>
                        <div class="info-row">
                            <span class="info-label">Ukupno:</span>
                            <span class="info-value">${Math.round(data.memory.total / (1024*1024*1024))} GB</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Slobodno:</span>
                            <span class="info-value">${Math.round(data.memory.free / (1024*1024*1024))} GB</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Iskorišteno:</span>
                            <span class="info-value">${Math.round(data.memory.used / (1024*1024*1024))} GB</span>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h4>🖥️ Operativni sistem</h4>
                        <div class="info-row">
                            <span class="info-label">OS:</span>
                            <span class="info-value">${data.os.distro} ${data.os.release}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Platforma:</span>
                            <span class="info-value">${data.os.platform}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Arhitektura:</span>
                            <span class="info-value">${data.os.arch}</span>
                        </div>
                    </div>
                </div>
            `;
        } catch (error) {
            console.error('Error loading system info:', error);
            document.getElementById('contentBody').innerHTML = `
                <div class="tab-content">
                    <h3>Greška</h3>
                    <p>Nije moguće učitati informacije o sistemu: ${error.message}</p>
                </div>
            `;
        }
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', () => {
        console.log('Page loaded, initializing...');
        
        // Particle animation
        initParticleAnimation();
        
        // Initial system preview
        if (window.electronAPI && window.electronAPI.getSystemInfo) {
            window.electronAPI.getSystemInfo().then(data => {
                updateSystemPreview(data);
            }).catch(err => {
                console.error('Error loading initial data:', err);
            });
        }
    });

    // Particle animation
    function initParticleAnimation() {
        const canvas = document.getElementById('particleCanvas');
        if (!canvas) return;
        
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        const particles = [];
        const particleCount = 50;
        
        for (let i = 0; i < particleCount; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                vx: (Math.random() - 0.5) * 0.5,
                vy: (Math.random() - 0.5) * 0.5,
                size: Math.random() * 3 + 1
            });
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                
                if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(102, 126, 234, 0.3)';
                ctx.fill();
            });
            
            requestAnimationFrame(animate);
        }
        
        animate();
    }
    </script>

    <script src="renderer.js"></script>
</body>
</html>